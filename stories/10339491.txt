This is the Tcl browser plugin ( 1 , 2 ) reshaped into a NP runtime version and based on the Mozilla Gecko SDK . It contains fixes to work with Tcl 8.6 and a new tclplugin.dll from this version. Tclets are now capable of interaction with the browser NP runtime and the document tree, including invocation of Javascript functions. Additionally there is a scriptable object in every embedded Tclet for interaction from Javascript from within the embedding document.

Version 4 of the plugin contains some minor bugfixes for compatibility with Tcl 8.5 and 8.6, restores the old functionality and make old Tclets working with new Tcl versions. Apart from that an enhancement was developed for communication with the browser NP runtime. This enables Tclet authors to access the document DOM, read and modify elements within the document and call javascript functions from Tclets. It also enables access to special functionality exported by the browser through NPR, such as the javascript console or browser storage.

As of now the plugin version 4 works on all Mozilla (Gecko based) browsers, such as firefox, kmeleon, icecat, etc.. The pluginhostctrl activex control can be restored in the near future to make it work on IE, this is still to be done. The plugin works *not* with Google Chrome, Opera and other webkit browsers, since these browsers are not supporting anymore (or phasing out the support of) NPAPI. For these browsers a PPAPI version of the plugin would be necessary (or a different approach: NaTcl

The documentation for commands and security principles (1, 2) of plugin version 3 hold true for this version as well. Additionally the new npr command for interaction with the browser NP runtime is documented in a webpage that contains an interactive console called "tcletsh". Thus the "npr" command (and other safe-Tcl features) can directly be tried out from within the documentation page. The html page and accompanying Tclet are in the examples/ directory, and are installed with the setup on Windows.

Another enhancement for the Windows platform is a WiX based MSI installer, which enables easy installation of the plugin on Windows (>= 7). Besides the Tcletsh example described above, the installer contains a new 8.6 version of tclplugin.dll with the complete Tcl/Tk runtime. And it contains all packages of Tcllib-1.17 and Tklib-0.6. When the plugin is installed via this MSI setup, there is no need for an extra Tcl interpreter on the target machine, and Tclet authors can rely on tcllib and tklib to be present. If Tclet authors need more packages, it is possible to build a specially enhanced version of tclplugin.dll, which contains these packages. The tools/ directory contains a script and a mechanism to build custom tclplugin.dll's. If the MSI is regenerated afterwards, the new MSI contains the customized tclplugin.dll. This is an easy way to create and deploy customized versions of the plugin in intranet sites.|||

