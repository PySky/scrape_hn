So how does this work in Sabre? From a user perspective, you wont feel a thing. When you upload a new image to a page, post or the media library the image is inserted into your post, thumbnails are generated and you go on with your business. In the background a process starts the actual compression and once its done, the file is swapped out with the compression version. Because Guetzli replaces a transparent background in PNGs with pure black, we only apply Guetzli on JPGs.

Making images perfect for the web is no small task. Ive reviewed Google Guetzli implementation which is written in pure C and it looks lean, mean and very fast. But fast is a relative concept and compressing a 3 MP image takes approximately 5.5 minutes on our shiny new Quad Core Compression server. Thats right, we've set up a dedicated server purely for image compression. Once a single image starts compressing, it takes up 100% CPU time of a single core, which means that 4 images being compressed in parallel effectively bottlenecks the server and grinds it to a crawl.

By dividing the work onto different servers, we've ensured an asynchronous workflow, where Sabre users aren't affected in terms of user experience, no matter the workload and where a failure to successfully compress does not leave the system waiting. Here's how we set it up:

The upper limit of 10 minutes is not a promise but an intention. As load increases, we will add more cores to keep processing time to a minimum, but keep in mind that before the image is returned to your Sabre installation, everything works just as you would expect - But at some point, you will get a size reduction and resulting speed increase on your site. Before we added this algorithm, Sabre sites were already in the top 95% in terms of speed so thats what you're getting in the first 5 minutes, after that you're up there with the very best in the world.

Google went on record saying that Guetzli reduces image sizes by approximately 35%. We've tested on a fairly large stack of images and seen gains in the range 10% to 70%. The smaller gains are had on images that have already been run through another compressor, which still is a pretty big win. We've seen up to 70% of images shot on a phone. On average we also see roughly 35% gains, meaning that picture intensive sites just got nearly 35% faster. I say nearly, because Sabre currently serves single pages in about 650 milliseconds depending on your distance to the server and that number remains unchanged.

We've carefully reviewed many of the early compression images and found that in most cases, we arent able to tell a 1.2Mb image apart from a 480Kb image, which is quite amazing. The very tiny difference that you notice on maximum zoom seem to favor Guetzli, in that it produces the better image. This is a huge win, in that Sabre users now get both better and faster loading images. In no cases could we detect any image degradation, but if you come across an example, please let us know.

We hope you all enjoy this new feature very much! 

|||

Guetzli compression is now automatically applied to all jpegs reducing their size by about 35% resulting in a faster webexperience for all visitors of Sabre Sites.