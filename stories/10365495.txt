Run, Bucket, Run // whitelist of repos to access via CORS rather than AP.request // work around HTML5 audio InvalidStateError in some browsers // need to set font to calculate platform dimensions // a max indent of < 10 will make many jumps impossible // it's within certain size limits and the previous one // make sure the jump is possible // and here's what what we need to render a platform // cache the last left/right keydown, as we only want to zero out // horizontal velocity when the most recently pressed left/right keyup // JUMP! (if on a platform or close enough to one) // the further right we go, // have to do some translation here to // rotate the bucket around its center // we're off screen right, stop rendering // dispose of platforms once they're off screen left // whole screen width to the right // in this loop we try to find the platform // our hero bucket is standing on // platform is too far right // platform is too far left OR above our hero // platform is above our hero // out hero is on the platform! // if the platform is moving, we must // add its velocity to our hero // cache the next two platforms too // if we're not falling, we can't be going down // figuring out what angle the bucket is at // if we're falling, tilt towards the // rock the bucket forward and back while running // rock the bucket back to center when stationary // you didn't make it pal, no victory music // no localStorage? no high score for you // a short delay to meditate on the frivolity of life // we're at the end of the level, JUMP! // keep running, unless the platform we're // on is moving and we're close to the edge // if we're moving, pick a point in space // we can definitely make the jump from // otherwise just jump from near the end // we can jump right over the next platform! // just jump to the next platform // we're passed the jump spot we picked, JUMP! // shit, the next platform moves a long way // we're not at the jump point yet, keep running // if the next platform is close, we just do a small jump // if we're over the target platform, let go of the jump button // if we're getting close to the end of the platform, just drop // did they click the tweet this button? // did they click the wrench button? // is passed the elapsed time in ms // if we're in an iframe and DON'T have // the standalone flag, assume we're being // determine the context file from the // if this repository requires auth, use the // if this repository is whitelisted, use CORS // if we're not being rendered as a Bitbucket "Sorry, your browser does not seem to support the canvas API."|||

