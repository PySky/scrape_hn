There has been a long-running debate over how companies use the H-1B visa program and how it affects American workers. Much of the dispute surrounds whether companies take advantage of the system to hire foreign workers for lower pay, displacing Americans from those jobs. But it’s important to understand the underlying elements of the debate: one level rests on the heavy use of H-1B visas by outsourcing firms; another rests on the disagreement over whether the program increases companies’ access to scarce skills or merely helps them minimize costs.

It’s hard to overstate the significance — and complexity — of the H-1B visa system in the U.S. It is the country’s largest guest worker visa program, and an important channel for high-skilled immigration. It allows companies to hire foreign workers for specialized jobs that can be challenging to fill. It has benefited the tech industry enormously, and other sectors, including health care, science, and finance, have also used it to fill gaps in their workforces.

But in April, just after U.S. Citizen and Immigration Services (USCIS) conducted its annual lottery for selecting H-1B visas (it received 199,000 petitions for the available 85,000 visas), President Trump signed an executive order that will put H-1B and similar programs under new scrutiny. Titled “Buy American and Hire American,” it directs federal agencies to review whether existing policies adequately prioritize American products and protect American workers.

The order is the latest development in a long-running debate over how companies use the H-1B program and how it affects American workers. Much of the dispute surrounds whether companies take advantage of the program to hire foreign workers for lower pay, displacing Americans from those jobs. But it’s important to understand the underlying elements of this debate: one level rests on the heavy use of H-1B visas by outsourcing firms; another rests on the disagreement over whether the program increases companies’ access to scarce skills, or merely helps them minimize costs.

H-1B visas are granted through an employer-driven system, meaning employers petition the government for visas tied to specific roles. These must qualify as “specialty occupations,” which typically require a bachelor’s degree (or the equivalent) and are found in fields such as science, engineering, information technology, medicine, and business. Companies have to attest that they will not pay an H-1B worker less than they would an American, and that H-1B workers will not “adversely affect the working conditions” of other workers — but it’s often said that this hardly functions as a rule and is not strictly (if at all) enforced. There is also criticism that it opens up various loopholes that firms can exploit. For example, as a Kellogg Insight research summary explains:

The program is most often associated with the tech industry, where H-1B workers hold about 12%–13% of jobs, according to a Goldman Sachs report. (For comparison, they hold around 0.6%–0.7% of U.S. jobs overall.) Being able to recruit globally is supposed to help tech powerhouses like Facebook and Amazon find the talent they need.

The companies that bring in the most H-1B workers, however, are not Silicon Valley tech firms but IT services firms, many based in India, that specialize in consulting or outsourcing. These companies, which include Tata Consultancy Services, Cognizant, Infosys, Wipro, Accenture, IBM India, and Deloitte, are contracted by other companies to do IT work. According to an analysis by Ronil Hira, a professor of public policy at Howard University, in 2014 nearly one-third of new H-1B visas went to 13 of these so-called “outsourcers.” (Tata received the most visas, with 5,650, while Amazon, the tech company with the highest number, got 877.)

Compared with Silicon Valley firms, IT services companies tend to hire H-1B workers for lower-paying entry-level work. For example, Axios reported that 72.4% of Tata’s H-1B visa filings were for jobs paying between $60,000–$70,000 a year. Companies like Amazon, Apple, Facebook, Google, and Microsoft mostly filed for jobs that paid well above $100,000.

This difference in pay gets at one of the main criticisms of the H-1B program: Rather than bringing the world’s “best and brightest” talent into the country to work alongside Americans, the system appears to be bringing in cheaper foreign labor that can hurt American workers’ employment and income prospects. It’s a compelling argument: Numerous American IT workers have been laid off (and then asked to train their H-1B replacements) after their employers chose to outsource IT department work instead of keeping it in-house. These decisions by companies have resulted in a few high-profile lawsuits, such as those brought by workers against Disney and Southern California Edison. And a number of studies have found that H-1B workers can have negative effects on American workers, in terms of displacement and lower earnings.

On the other side of the debate, H-1B supporters argue that the program brings needed skills into the labor market, which helps firms remain innovative, productive, and competitive. A wealth of academic literature has documented how high-skilled immigrants, particularly in STEM, and including those who would enter the U.S. on H-1B visas, boost the economy by increasing innovation, productivity, and sometimes even employment.

It is not exactly easy for many companies to obtain H-1B visas, and members of the tech industry have lobbied Congress to raise the cap on H-1B visas to help meet demand. In 2008 Bill Gates testified before Congress to advocate for more H-1B visas to help compensate for “a deficit of Americans with computer science degrees.” (A bill was introduced in 2015 to raise the cap and liberalize other rules around H-1Bs, but died in Congress.) Companies like Tata, Infosys, and Wipro have also lobbied against restrictions on the program, arguing that their services help corporations become more competitive. More broadly, many tech leaders have emphasized the contributions of high-skilled immigrants to the economy — and have spoken out against anti-immigrant actions like President Trump’s travel bans.

There is mixed evidence about the existence and the extent of a STEM skills shortage. Companies say they struggle to find qualified workers for specialized positions, suggesting there is a shortage of necessary skills. Some experts say that there are plenty of American workers who could fill these jobs, and that if employers were truly desperate for skills, wages for skilled positions would surge (but they haven’t).

An analysis led by Hal Salzman, a professor at Rutgers University, found that the U.S. graduates more STEM workers than the tech industry needs and that STEM wages have stayed depressingly flat. They write:

A literature review by Yi Xue and Richard C. Larson of MIT found that there is and isn’t a STEM skills shortage — it depends on where you look. In the academic job market, for example, they conclude there is no noticeable shortage; in fact, there is an oversupply of PhDs competing for tenure-track faculty positions in many fields (e.g., biomedical sciences, physical sciences). But the government sector and private industry have shortages in specific areas. In the private sector, for instance, software developers, petroleum engineers, and data scientists were found to be in high demand.

There is other evidence of a strong demand for workers with tech skills. The Economist has reported that the number of unfilled U.S. jobs in computing and information technology could top one million by 2020: “The number of young Americans graduating with qualifications in IT subjects is rising, but nowhere near fast enough to satisfy the burgeoning demand for their skills. Last year, American campuses produced fewer than 56,000 graduates with the sort of qualifications sought by information technology (IT) firms.”

When it comes to how much immigrant and native-born U.S. tech workers earn, research by Gordon Hanson of UC San Diego and Matthew Slaughter of Dartmouth’s Tuck School of Business has found that while immigrants usually earn less than native-born workers across most occupations (controlling for factors like age, education, and gender), this difference tends to be smaller in STEM fields. They also found that wages for immigrants in STEM have actually increased: In 1990 native-born STEM workers earned more than immigrants; by 2012, this reversed.

“The workers coming in on H-1Bs are a diverse crowd,” Hanson says. “You have superstar computer scientists at Facebook and Amazon and folks doing back-office IT work. But, on average, the earnings of those [foreign] workers, after just a little time in U.S., exceed [Americans’] in comparable jobs.”

Hanson cautions, however, that their results do not discount the possibility that the arrival of foreign-born engineers is driving down earnings for U.S.-born engineers. “Standard economic models would say that’s happening,” he says. “But more engineers is a good thing. There may be some lower earnings opportunities for U.S.-born engineers, but there’s more innovation for the country as a whole.”

Similarly, an analysis of 2010 H-1B petitions by Jonathan Rothwell and Neil Ruiz, both formerly of Brookings, found that H-1B workers earned more on average ($76,356) than American workers with a bachelor’s degree ($67,301), within the same age group and occupation. (It’s worth noting that the process of petitioning for an H-1B visa costs companies thousands of dollars, which suggests that they pay a premium for foreign workers’ skills.)

Hanson and Slaughter’s paper also noted that although H-1B visas disproportionately go to STEM workers, this is not an inherent feature of the H-1B program. “That most H-1B visas are captured by STEM workers may simply be the consequences of strong relative labor demand for STEM labor by U.S. companies,” they write.

Contrarily, Hira, who has been outspoken about abuses of the H-1B visa system, rebuffs the skills shortage theory. “If there was this terrible shortage, I’d think you’d see different behavior and practices,” he says. “If there was really a skills shortage, you’d see more diversity in the tech industry — they’d hire underrepresented minorities and women, they’d be training people and investing, they’d be retaining incumbent workers, not laying them off by the thousands, and you wouldn’t see rampant age discrimination.”

According to Hira, the skills shortage argument is a red herring that has clouded the conversation about how H-1Bs are used. “The top occupation of H-1B workers is computer systems analyst. These are back-end IT workers. I don’t see how anybody could argue there’s a shortage of those folks,” he says. “Hiring an H-1B should, but doesn’t, require an employer to demonstrate any shortage, so the shortage argument is moot. If there is a severe shortage, then it would be easy for employers to show one. Yet they’ve opposed any such requirement.”

One of the most consequential criticisms of the H-1B program is its heavy use by IT outsourcing firms such as Infosys, Tata Consultancy Services, and Wipro. Outsourcing has been a trend in information management for years, as companies have increasingly hired contractors (at lower cost) to do tasks such as software programming and data entry, processing, and storage.

Here’s a simplified way to explain how this plays out: Say you’re a big company with your own IT department. To reduce overhead, or to cut costs, or to increase efficiency, you decide to contract out (outsource) some or all of your IT work. So you hire an IT services firm to do that work on a temporary, as-needed basis. That firm sends workers, many of whom are on H-1B visas, to do those tasks. Sometimes, these contract workers supplement your IT staff; other times, you lay off your IT staff and the contractors effectively replace them.

Because these IT firms receive so many H-1B visas, there are fewer for other companies. “No matter what your view on outsourcing is, this was not the original intent of the program,” says William Kerr, an economist at Harvard Business School who has studied the effects of high-skilled immigration in the U.S. “One of the implications of this is it reduces the number of visas available for their original purposes.”

“The outsourcing companies bring lower-level workers than the American tech companies,” Kerr says. “That work has $60,000 salaries, which is not minimum wage by any means, but it’s lower paid than a typical computer scientist at a large U.S. tech employer.”

IT companies in India and the U.S. have lobbied against making the H-1B program more restrictive, arguing that they help American companies become more competitive by handling their IT operations. They’ve also said that the visa programs allow them to keep jobs in the U.S., so reducing the number of visas they’re allowed may result in them shifting work back to India. (However, Bloomberg recently reported that Infosys plans to create thousands of new jobs for Americans over the next two years.)

Any big changes to the H-1B program would have to be passed by Congress. At least four proposals to reform it have recently surfaced, and USCIS has suspended expedited processing of H-1B applications.

Wider reforms would change the way many companies, especially tech and IT firms, recruit and hire highly skilled talent. Further restricting the number of visas could cost the U.S. a competitive edge in the global war for tech talent.

“This might sound self-serving, coming from someone who works in academia, but one thing that has helped maintain our technological leadership is innovation and technical research, and immigration has helped us do that,” Hanson says. “Immigration is an important part of why the U.S. is able to maintain its elite status.”

Trump’s “Buy American and Hire American” order aims to address some of the concerns surrounding the H-1B visa system. The larger effects on high-skilled immigration — and on the economy — remain to be seen.

Editor’s note: We’ve updated this article from an earlier version that said companies applying for H-1B visas have to attest that they could not find a qualified American worker for the position. This requirement is only for H-1B dependent companies, though there are exceptions to this rule.|||

It’s partly about outsourcing, partly about the skills shortage.