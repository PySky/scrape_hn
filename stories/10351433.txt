The NetBSD Project is pleased to announce NetBSD 7.0, the fifteenth major release of the NetBSD operating system. This release brings stability improvements, hundreds of bug fixes, and many new features. Some highlights of the NetBSD 7.0 release are: DRM/KMS support brings accelerated graphics to x86 systems using modern Intel and Radeon devices. Support for many new ARM boards: Major NPF improvements: Support for IPv6-to-IPv6 Network Prefix Translation (NPTv6) as per RFC 6296. Support for CDB based tables (uses perfect hashing and guarantees lock-free O(1) lookups). blacklistd(8), a new daemon that integrates with packet filters to dynamically protect other network daemons such as ssh, named, and ftpd from network break-in attempts. Numerous improvements in the handling of disk wedges (see dkctl(8) for information about wedges). GPT support in sysinst via the extended partitioning menu. Please read below for a full list of changes in NetBSD 7.0. Complete source and binaries for NetBSD 7.0 are available for download at many sites around the world. A list of download sites providing FTP, AnonCVS, SUP, and other services may be found at http://www.NetBSD.org/mirrors/. We encourage users who wish to install via ISO or USB disk images to download via BitTorrent by using the torrent files supplied in the images area. A list of hashes for the NetBSD 7.0 distribution has been signed with the well-connected PGP key for the NetBSD Security Officer: http://ftp.NetBSD.org/pub/NetBSD/security/hashes/NetBSD-7.0_hashes.asc NetBSD is free. All of the code is under non-restrictive licenses, and may be used without paying royalties to anyone. Free support services are available via our mailing lists and website. Commercial support is available from a variety of sources. More extensive information on NetBSD is available from our website:

Major Changes Between 6.0 and 7.0 The complete list of changes can be found in the CHANGES and CHANGES-7.0 files in the top level directory of the NetBSD 7.0 release tree. An abbreviated version is below: Add a new RLIMIT_NTHR limit to limit the number of processes per user and the corresponding kern.maxlwp sysctl. Create an "options MODULAR_DEFAULT_AUTOLOAD" config option and add it to all kernel configs that contain "options MODULAR". This option turns on module autoloading by default (which is the current default). This allows people who don't want module autoloading on by default to disable it by simply removing/commenting this line. kqueue(2): on NOTE_EXIT, put the exit code of the process in "data". sysmon_pswitch(9): Introduce a new switch type, PSWITCH_TYPE_RADIO, to be used to report to userland hardware radio switch changes. powerd(8) will call a "radio_button" script to handle the event. Add net.inet6.ip6.prefer_tempaddr sysctl knob to prefer IPv6 temporary addresses as the source address. Add support for the TCP_INFO socket option, which permits the caller to query certain information about a TCP connection. ptyfs: Allow multiple mounts and support proper device visibility in chroots. Enable support for UFS1 extended attributes in GENERIC and GENERIC-like kernels. FFS: Don't fail mounting the root filesystem if the WAPBL log is corrupt. Add experimental support for the (mostly SSD specific) "discard", or ATA "TRIM" command to wd(4) and FFS. rnd(4): Sensors can now be a source of entropy. Gather much more entropy early in boot and thereafter: autoconf timings, all sysctl settings (including hostname), contents of early network packets, environmental sensor values generically rather than as per-driver special cases. rnd(9): Add explicit enable/disable hooks for callout-driven sources (be more power friendly). Make "skew" source polled so it runs only when there is entropy demand. Adjust entropy collection from polled sources so it's processed sooner. Add viornd(4), a driver for the VirtIO entropy source available on QEMU, KVM, and Google Compute Engine. cprng_fast(9): Replace slow/broken mutex-protected kernel _arc4random() with new cprng_fast implementation using per-cpu instances of chacha8. Audio: ess(4): Add support for Spatializer, 3D audio effects embedded in ES1869 and ES1879. Graphics and Video: Add accelerated support for modern Intel and Radeon devices on x86 through a port of the Linux 3.15 DRM/KMS code. Add tifb, an experimental driver for the Texas Instruments AM335x SoC's graphic controller. Storage: mfi(4): Make it possible to use the LSI MegaCLI Linux binary on NetBSD. Add support for the bio(4) API to the mpt(4) driver. Make ccd(4) work with component and total sizes greater than 2TB. Networking: Add axen(4), a driver for ASIX AX88178a and AX88179 Ethernet devices. Ported from OpenBSD. USB: Add support for SMP to the USB subsytem. Miscellaneous: Add mcp48x1dac, a driver with preliminary support for the Microchip MCP48x1 family of Digital-to-Analog converters. vmt(4): Synchronize the clock periodically to ensure it remains up-to-date even when the host is suspended. amd64: Add support for up to 256 CPUs. amiga: Rework X-Surf driver as xsurf(4). Add support for clockport(4) on top of xsurf. A2000-style RTCs are now driven by the msm6242b(4) driver. Add empm, a driver for the power manager present on Mediator 1200 TX and SX bridges. ARM: All arm ports with a common MACHINE_ARCH now generate the same userspace. All sets are the same except for etc.tgz. epoc32: Add a new port, epoc32, supporting 32bit Psion EPOC PDAs, primarily the Series 5 (CL PS-711x), Series 5mx (Windermere) and Series 7 (StrongARM) models. evbarm: Add tps65217pmic(4), a driver with support for TPS65217 PMIC, as found on BeagleBone and other AM335x based boards. Add edma, a driver for the Enhanced Direct Memory Access controller found in the AM335x SoC. hppa: Add ohci(4) support for the National Semiconductor PC87560, as found in many hppa machines. hp300: Add arcofi(4), which supports the HP "Audio1" device found on HP9000/425e machines. Add proper consinit(9) support for sti(4) at sgc framebuffer on HP9000/425e. Add support for sti(4) framebuffer at sgc bus on some 425t. i386: Remove vga@isa and pcdisplay@isa from GENERIC, and create a new LEGACY kernel config that includes them instead. luna68k: sysinst now creates a boot UFS partition and installs the native bootloader during installation. The wsfb(4) Xserver now works as monochrome server even with 4bpp/8bpp color framebuffers. The console ANSI color palette is now reset properly after returning to WSDISPLAYIO_MODE_EMUL (e.g., when exiting the Xserver). x68k: The bootloader now probes the actual memory size and warns if the memory size value stored in SRAM is different. Add a 'switch' command to the bootloader to display and modify SRAM parameters as NetBSD's memswitch(8) and Human68k's SWITCH.X commands. Add support for up to 1008 MB of extended memory on the XM6i emulator. Add blacklistd(8), a daemon that integrates with packet filters to dynamically protect other network daemons such as ssh, named, and ftpd from network break-in attempts. Add flock(1), a utility to provide locks to shell scripts similar to shlock(1). Add getaddrinfo(1), a utility for querying the system's name resolver. Add support for named wedges to the following commands: ccdconfig(8), installboot(8), fsck(8), newfs(8). dbsym(8): Add the -p option, to report the size of the kernel symbol table and the size of the db_symtab space. etcupdate(8): A colon-separated list of tgz files is no longer accepted; you must use multiple -s options instead. fstab(5): Add NAME=wedgename for fs_spec and routines to parse it. Now wedges can be used in /etc/fstab, even in dynamic environments where disks come and go and wedges get renumbered. indent(1): Add -ut / -nut options for tab treatment, as in FreeBSD. makefs(8): Add support for msdos and UDF, creating file systems at an offset, and merging directories with common files. mkdep(1): Add the -P option to prepend the string given to every target filename. resize_ffs(8): Add -c to check to see if grow/shrink is required. tetris(6): Add a 'down' key, defaulting to 'n'. It moves the block down a line, if it fits. tset(1): Restore logic for setting the VERASE character. Use terminfo _unless_ the terminal does overstrike, and use terminfo data not only for an unset tty. units(1): Add -l and -L options to list known units. vndcompress(1) Add support for constant memory, so 32-bit systems should be able to compress or uncompress multi-terabyte disks. zgrep(1): suppress the prefixing of filename on output when only one file is specified, to match grep(1)'s output. libc: arc4random(3): Use ChaCha20 instead of RC4. libm: Add basic long double support for elementary functions. Most transcendent functions are stubbed out. Add PUFFS support for fallocate and fdiscard operations, and add FUSE fallocate support. /usr/share/doc: Install formatted docs instead of nroff sources, and reorganize. New BUILDINFO variable may be passed to build.sh, and exposed in /etc/release, as well as in sysctl kern.buildinfo. Process /etc/modules.conf (if present) at startup, before securelevel is raised, to allow module loading on ports without a module aware bootloader. Add a resize_root rc.d script. If resize_root=YES in rc.conf (the default is NO) then the system attempts to resize the root file system to fill its partition prior to mounting read-write. In this release of NetBSD, the following software components have been removed from the system. Some were not useful anymore, or their utility did not justify the maintenance overhead. Others were not working properly and there was a lack of interest in fixing them. The window utility was removed in favor of tmux. window can be found in pkgsrc/misc/window. FAST_IPSEC is now named IPSEC. The old KAME IPSEC code is gone.

The NetBSD Foundation would like to thank all those who have contributed code, hardware, documentation, funds, colocation for our servers, web pages and other documentation, release engineering, and other resources over the years. More information on the people who make NetBSD happen is available at: We would like to especially thank the University of California at Berkeley and the GNU Project for particularly large subsets of code that we use. We would also like to thank the Internet Systems Consortium Inc. and the Network Security Lab at Columbia University's Computer Science Department for current colocation services.

NetBSD is a free, fast, secure, and highly portable Unix-like Open Source operating system. It is available for a wide range of platforms, from large-scale servers and powerful desktop systems to handheld and embedded devices. Its clean design and advanced features make it excellent for use in both production and research environments, and the source code is freely available under a business-friendly license. NetBSD is developed and supported by a large and vibrant international community. Many applications are readily available through pkgsrc, the NetBSD Packages Collection.

The NetBSD Foundation was chartered in 1995, with the task of overseeing core NetBSD project services, promoting the project within industry and the open source community, and holding intellectual property rights on much of the NetBSD code base. Day-to-day operations of the project are handled by volunteers. As a non-profit organization with no commercial backing, the NetBSD Foundation depends on donations from its users, and we would like to ask you to consider making a donation to the NetBSD Foundation in support of continuing production of our fine operating system. Your generous donation would be particularly welcome to help with ongoing upgrades and maintenance, as well as with operating expenses for the NetBSD Foundation. Donations can be done via PayPal to , or via Google Checkout and are fully tax-deductible in the US. See http://www.NetBSD.org/donations/ for more information, or contact directly.|||

